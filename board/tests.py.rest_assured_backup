from rest_assured.testcases import ReadWriteRESTAPITestCaseMixin, BaseRESTAPITestCase
from . import factories
import datetime

class MessageAPITestCase(ReadWriteRESTAPITestCaseMixin, BaseRESTAPITestCase):

    base_name = 'message' # this is the base_name generated by the DefaultRouter
    factory_class = factories.Message
    update_data = {'title': 'EXTRA LONG TITLE@@@@@@@@@@@@@@@@@@@@@@@@@@@########'}
    user_factory = factories.User

    def setUp(self):
       super(MessageAPITestCase, self).setUp()

    def get_object(self, factory):
        return factory.create()

    def get_create_data(self):
       return {'title': 'Lucifer Sam',
               'body_text': 'is a song by British psychedelic rock band Pink Floyd.',
               'owner': self.user,
               'created': datetime.date(2016, 8, 13),
               'thread': ' '.join(["http://minds57.pythonanywhere.com/threads/",str(self.object.thread.pk)])}
